<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>保固明細生產</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 模擬 A4 預覽縮放，手機上不跑版 */
        @media (max-width: 768px) {
            .preview-container {
                transform: scale(0.45);
                transform-origin: top center;
                height: 520px; /* 縮放後的容器高度 */
            }
        }
        @media print {
            .no-print { display: none !important; }
            body { padding: 0; background: white; }
            .print-area { border: none !important; margin: 0 !important; width: 210mm; height: 297mm; }
        }
    </style>
</head>
<body class="bg-slate-50">
    <div class="no-print bg-white p-4 flex justify-between items-center border-b sticky top-0 z-50">
        <button onclick="history.back()" class="text-slate-600"><i class="fas fa-chevron-left"></i> 返回</button>
        <button onclick="window.print()" class="bg-teal-600 text-white px-6 py-2 rounded-full font-bold shadow-lg">列印 PDF</button>
    </div>

    <div class="max-w-md mx-auto p-4 no-print">
        <div class="bg-white p-6 rounded-3xl shadow-sm border mb-6">
            <h3 class="font-black text-lg mb-4 text-slate-800">輸入工程資料</h3>
            <div class="space-y-4">
                <input type="text" id="in_client" oninput="sync()" placeholder="客戶姓名" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 focus:ring-teal-500">
                <input type="text" id="in_addr" oninput="sync()" placeholder="工程地址" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 focus:ring-teal-500">
                <input type="number" id="in_year" oninput="sync()" placeholder="保固年限 (年)" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 focus:ring-teal-500">
            </div>
        </div>
        <p class="text-center text-slate-400 text-xs mb-2">▼ 下方為即時預覽</p>
    </div>

    <div class="flex justify-center bg-slate-200 py-4 lg:bg-transparent overflow-hidden">
        <div class="preview-container">
            <div class="print-area bg-white p-[20mm] shadow-2xl min-h-[297mm] w-[210mm] text-slate-800 relative">
                <div class="absolute top-10 right-10 text-[10px] font-mono text-slate-300" id="serial-num">ID: JD-882910</div>
                <h2 class="text-3xl font-black border-b-4 border-slate-800 pb-4 mb-10">防水工程保固合約書</h2>
                <div class="grid grid-cols-4 gap-y-6 text-lg mb-12">
                    <div class="font-bold text-slate-400">業主名稱</div>
                    <div class="col-span-3 border-b border-slate-200 font-black" id="out_client">--</div>
                    <div class="font-bold text-slate-400">施工地址</div>
                    <div class="col-span-3 border-b border-slate-200 font-black" id="out_addr">--</div>
                    <div class="font-bold text-slate-400">保固期限</div>
                    <div class="col-span-3 border-b border-slate-200 font-black">共 <span id="out_year">--</span> 年整。</div>
                </div>
                <div class="text-sm leading-relaxed space-y-4">
                    <p>1. 本工程於保固期間內，若因施工品質不良導致漏水，本公司負責無償修復。</p>
                    <p>2. 如遇天災、地震導致建築結構龜裂，不在保固範圍內。</p>
                </div>
                <div class="mt-20 flex justify-between items-end">
                    <div class="space-y-2">
                        <p class="font-bold">承攬單位：錦德工程行</p>
                        <p class="text-xs">地址：台中市西屯區...</p>
                    </div>
                    <div class="w-24 h-24 border-2 border-rose-100 rounded-full flex items-center justify-center text-rose-200 text-xs border-dashed">用印處</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function sync() {
            document.getElementById('out_client').innerText = document.getElementById('in_client').value || '--';
            document.getElementById('out_addr').innerText = document.getElementById('in_addr').value || '--';
            document.getElementById('out_year').innerText = document.getElementById('in_year').value || '--';
        }
        window.onload = () => {
            document.getElementById('serial-num').innerText = 'JD-ID: ' + Math.random().toString(36).substr(2, 7).toUpperCase();
        }
    </script>
</body>
</html>
